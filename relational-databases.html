<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Relational databases | Welcome to my portfolio</title>
  <meta name="description" content="6 Relational databases | Welcome to my portfolio" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Relational databases | Welcome to my portfolio" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Relational databases | Welcome to my portfolio" />
  
  
  

<meta name="author" content="Lamyae el Mahboud" />


<meta name="date" content="2023-05-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="western-blot-analysis-using-rstudio.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> My portfolio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>1.1</b> introduction</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#my-curriculum-vitae"><i class="fa fa-check"></i><b>1.2</b> My curriculum vitae</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="c.-elegans-plate-experiment-analysis.html"><a href="c.-elegans-plate-experiment-analysis.html"><i class="fa fa-check"></i><b>2</b> C. elegans plate experiment analysis</a>
<ul>
<li class="chapter" data-level="2.1" data-path="c.-elegans-plate-experiment-analysis.html"><a href="c.-elegans-plate-experiment-analysis.html#introduction-1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="c.-elegans-plate-experiment-analysis.html"><a href="c.-elegans-plate-experiment-analysis.html#analyzing-plan"><i class="fa fa-check"></i><b>2.2</b> analyzing plan</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="open-peer-review.html"><a href="open-peer-review.html"><i class="fa fa-check"></i><b>3</b> Open Peer Review</a>
<ul>
<li class="chapter" data-level="3.1" data-path="open-peer-review.html"><a href="open-peer-review.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="open-peer-review.html"><a href="open-peer-review.html#clarification"><i class="fa fa-check"></i><b>3.2</b> Clarification</a></li>
<li class="chapter" data-level="3.3" data-path="open-peer-review.html"><a href="open-peer-review.html#the-second-peer-review"><i class="fa fa-check"></i><b>3.3</b> the second peer review</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-guerrila-structure.html"><a href="the-guerrila-structure.html"><i class="fa fa-check"></i><b>4</b> The Guerrila structure</a>
<ul>
<li class="chapter" data-level="4.1" data-path="the-guerrila-structure.html"><a href="the-guerrila-structure.html#why-organizing-data"><i class="fa fa-check"></i><b>4.1</b> Why organizing data?</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="western-blot-analysis-using-rstudio.html"><a href="western-blot-analysis-using-rstudio.html"><i class="fa fa-check"></i><b>5</b> Western Blot analysis using Rstudio</a>
<ul>
<li class="chapter" data-level="5.1" data-path="western-blot-analysis-using-rstudio.html"><a href="western-blot-analysis-using-rstudio.html#introduction-3"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="western-blot-analysis-using-rstudio.html"><a href="western-blot-analysis-using-rstudio.html#planning"><i class="fa fa-check"></i><b>5.2</b> planning</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="relational-databases.html"><a href="relational-databases.html"><i class="fa fa-check"></i><b>6</b> Relational databases</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Welcome to my portfolio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="relational-databases" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Relational databases<a href="relational-databases.html#relational-databases" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>First we gonna load in the datasets into three separated dataframes in R.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="relational-databases.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#load in required packages</span></span>
<span id="cb13-2"><a href="relational-databases.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-3"><a href="relational-databases.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb13-4"><a href="relational-databases.html#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="relational-databases.html#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#load in gapminder dataset as dataframe</span></span>
<span id="cb13-6"><a href="relational-databases.html#cb13-6" aria-hidden="true" tabindex="-1"></a>gapminder_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(gapminder)</span>
<span id="cb13-7"><a href="relational-databases.html#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder_data) <span class="co">#show the first 12 rows of the dataframe</span></span></code></pre></div>
<pre><code>##               country year infant_mortality life_expectancy fertility
## 1             Albania 1960           115.40           62.87      6.19
## 2             Algeria 1960           148.20           47.50      7.65
## 3              Angola 1960           208.00           35.98      7.32
## 4 Antigua and Barbuda 1960               NA           62.97      4.43
## 5           Argentina 1960            59.87           65.39      3.11
## 6             Armenia 1960               NA           66.86      4.55
##   population          gdp continent          region
## 1    1636054           NA    Europe Southern Europe
## 2   11124892  13828152297    Africa Northern Africa
## 3    5270844           NA    Africa   Middle Africa
## 4      54681           NA  Americas       Caribbean
## 5   20619075 108322326649  Americas   South America
## 6    1867396           NA      Asia    Western Asia</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="relational-databases.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#load in dengue dataset</span></span>
<span id="cb15-2"><a href="relational-databases.html#cb15-2" aria-hidden="true" tabindex="-1"></a>dengue_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./data/raw_data/dengue_data.csv&quot;</span>, <span class="at">skip =</span> <span class="dv">10</span>) </span>
<span id="cb15-3"><a href="relational-databases.html#cb15-3" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(dengue_data) <span class="co">#make dataframe</span></span>
<span id="cb15-4"><a href="relational-databases.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_df)  <span class="co">#show the first 12 rows of the dataframe</span></span></code></pre></div>
<pre><code>##         Date Argentina Bolivia Brazil India Indonesia Mexico Philippines
## 1 2002-12-29        NA   0.101  0.073 0.062     0.101     NA          NA
## 2 2003-01-05        NA   0.143  0.098 0.047     0.039     NA          NA
## 3 2003-01-12        NA   0.176  0.119 0.051     0.059  0.071          NA
## 4 2003-01-19        NA   0.173  0.170 0.032     0.039  0.052          NA
## 5 2003-01-26        NA   0.146  0.138 0.040     0.112  0.048          NA
## 6 2003-02-02        NA   0.160  0.202 0.038     0.049  0.041          NA
##   Singapore Thailand Venezuela
## 1     0.059       NA        NA
## 2     0.059       NA        NA
## 3     0.238       NA        NA
## 4     0.175       NA        NA
## 5     0.164       NA        NA
## 6     0.163       NA        NA</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="relational-databases.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#load in flu dataset </span></span>
<span id="cb17-2"><a href="relational-databases.html#cb17-2" aria-hidden="true" tabindex="-1"></a>flu_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./data/raw_data/flu_data.csv&quot;</span>, <span class="at">skip =</span> <span class="dv">10</span>) </span>
<span id="cb17-3"><a href="relational-databases.html#cb17-3" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(flu_data) <span class="co">#make datafram of flu_data</span></span>
<span id="cb17-4"><a href="relational-databases.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_df) <span class="co">#show the first 12 rows of the dataframe</span></span></code></pre></div>
<pre><code>##         Date Argentina Australia Austria Belgium Bolivia Brazil Bulgaria Canada
## 1 2002-12-29        NA        NA      NA      NA      NA    174       NA     NA
## 2 2003-01-05        NA        NA      NA      NA      NA    162       NA     NA
## 3 2003-01-12        NA        NA      NA      NA      NA    174       NA     NA
## 4 2003-01-19        NA        NA      NA      NA      NA    162       NA     NA
## 5 2003-01-26        NA        NA      NA      NA      NA    131       NA     NA
## 6 2003-02-02       136        NA      NA      NA      NA    151       NA     NA
##   Chile France Germany Hungary Japan Mexico Netherlands New.Zealand Norway
## 1    NA     NA      NA      NA    NA     NA          NA          NA     NA
## 2    NA     NA      NA      NA    NA     NA          NA          NA     NA
## 3     1     NA      NA      NA    NA     NA          NA          NA     NA
## 4     0     NA      NA      NA    NA     NA          NA          NA     NA
## 5     0     NA      NA      NA    NA     NA          NA          NA     NA
## 6     0     NA      NA      NA    NA     NA          NA          NA     NA
##   Paraguay Peru Poland Romania Russia South.Africa Spain Sweden Switzerland
## 1       NA  329     NA      NA     NA           NA    NA     NA          NA
## 2       NA  315     NA      NA     NA           NA    NA     NA          NA
## 3       NA  314     NA      NA     NA           NA    NA     NA          NA
## 4       NA  267     NA      NA     NA           NA    NA     NA          NA
## 5       NA  241     NA      NA     NA           NA    NA     NA          NA
## 6       NA  227     NA      NA     NA           NA    NA     NA          NA
##   Ukraine United.States Uruguay
## 1      NA            NA      NA
## 2      NA            NA      NA
## 3      NA            NA      NA
## 4      NA            NA      NA
## 5      NA            NA      NA
## 6      NA            NA      NA</code></pre>
<p>In the tibbles above us we see the gapminder, flu and the dengue dataframes. The gapminder dataframe is tidy, there is only one observation in each row</p>
<p>The flu dataframe and the dengue dataframe are not tidy as we can see in the dataframes above us. There are more than one observation in each row. To make both dataframes tidy we use <code>{privot_longer}</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="relational-databases.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#make dengue dataframe tidy using &#39;privot_longer&#39;</span></span>
<span id="cb19-2"><a href="relational-databases.html#cb19-2" aria-hidden="true" tabindex="-1"></a>dengue_tidy <span class="ot">&lt;-</span> dengue_df <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="relational-databases.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span></span>
<span id="cb19-4"><a href="relational-databases.html#cb19-4" aria-hidden="true" tabindex="-1"></a>                 Argentina<span class="sc">:</span>Venezuela,</span>
<span id="cb19-5"><a href="relational-databases.html#cb19-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>,</span>
<span id="cb19-6"><a href="relational-databases.html#cb19-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">values_to =</span> <span class="st">&quot;dengue_cases&quot;</span>)</span>
<span id="cb19-7"><a href="relational-databases.html#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#show the first 12 rows of the dataset</span></span>
<span id="cb19-8"><a href="relational-databases.html#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_tidy) </span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   Date       country   dengue_cases
##   &lt;chr&gt;      &lt;chr&gt;            &lt;dbl&gt;
## 1 2002-12-29 Argentina       NA    
## 2 2002-12-29 Bolivia          0.101
## 3 2002-12-29 Brazil           0.073
## 4 2002-12-29 India            0.062
## 5 2002-12-29 Indonesia        0.101
## 6 2002-12-29 Mexico          NA</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="relational-databases.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#make flu dataframe tidy using &#39;privot_longer&#39;</span></span>
<span id="cb21-2"><a href="relational-databases.html#cb21-2" aria-hidden="true" tabindex="-1"></a>flu_tidy<span class="ot">&lt;-</span> flu_df <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> Argentina<span class="sc">:</span>Uruguay,</span>
<span id="cb21-3"><a href="relational-databases.html#cb21-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>,</span>
<span id="cb21-4"><a href="relational-databases.html#cb21-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">values_to =</span> <span class="st">&quot;flu_cases&quot;</span>)</span>
<span id="cb21-5"><a href="relational-databases.html#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#show the first 12 rows of the dataset </span></span>
<span id="cb21-6"><a href="relational-databases.html#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_tidy)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   Date       country   flu_cases
##   &lt;chr&gt;      &lt;chr&gt;         &lt;int&gt;
## 1 2002-12-29 Argentina        NA
## 2 2002-12-29 Australia        NA
## 3 2002-12-29 Austria          NA
## 4 2002-12-29 Belgium          NA
## 5 2002-12-29 Bolivia          NA
## 6 2002-12-29 Brazil          174</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="relational-databases.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#show the first 12 rows of the dataset</span></span>
<span id="cb23-2"><a href="relational-databases.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder)</span></code></pre></div>
<pre><code>##               country year infant_mortality life_expectancy fertility
## 1             Albania 1960           115.40           62.87      6.19
## 2             Algeria 1960           148.20           47.50      7.65
## 3              Angola 1960           208.00           35.98      7.32
## 4 Antigua and Barbuda 1960               NA           62.97      4.43
## 5           Argentina 1960            59.87           65.39      3.11
## 6             Armenia 1960               NA           66.86      4.55
##   population          gdp continent          region
## 1    1636054           NA    Europe Southern Europe
## 2   11124892  13828152297    Africa Northern Africa
## 3    5270844           NA    Africa   Middle Africa
## 4      54681           NA  Americas       Caribbean
## 5   20619075 108322326649  Americas   South America
## 6    1867396           NA      Asia    Western Asia</code></pre>
<p>All three datasets are now tidy. Each row contains their own observation.</p>
<p>If we compare the colomn type of the flu and dengue dataset, we can see some difference in these datasets. The colomns ‘year’ and ‘country’ dont have the same variables and data type as the gapminder dataset. We need to change these colomn so they match with each other.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="relational-databases.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb25-2"><a href="relational-databases.html#cb25-2" aria-hidden="true" tabindex="-1"></a>dengue_tidy<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dengue_tidy<span class="sc">$</span>country) <span class="co">#transform data type to factor</span></span>
<span id="cb25-3"><a href="relational-databases.html#cb25-3" aria-hidden="true" tabindex="-1"></a>dengue_tidy <span class="ot">&lt;-</span> dengue_tidy <span class="sc">%&gt;%</span> <span class="fu">separate</span>(Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">convert =</span> T, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>) <span class="co">#separate &#39;date&#39; into &#39;year&#39;, &#39;month&#39; and &#39;day&#39;</span></span>
<span id="cb25-4"><a href="relational-databases.html#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="relational-databases.html#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="relational-databases.html#cb25-6" aria-hidden="true" tabindex="-1"></a>flu_tidy<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(flu_tidy<span class="sc">$</span>country) <span class="co">#transform data type to factor</span></span>
<span id="cb25-7"><a href="relational-databases.html#cb25-7" aria-hidden="true" tabindex="-1"></a>flu_tidy <span class="ot">&lt;-</span> flu_tidy <span class="sc">%&gt;%</span> <span class="fu">separate</span>(Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">convert =</span> T, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>) <span class="co">#separate &#39;date&#39; into &#39;year&#39;, &#39;month&#39; and &#39;day&#39;</span></span>
<span id="cb25-8"><a href="relational-databases.html#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="relational-databases.html#cb25-9" aria-hidden="true" tabindex="-1"></a>dengue_tidy <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 5
##    year month   day country   dengue_cases
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;            &lt;dbl&gt;
## 1  2002    12    29 Argentina       NA    
## 2  2002    12    29 Bolivia          0.101
## 3  2002    12    29 Brazil           0.073
## 4  2002    12    29 India            0.062
## 5  2002    12    29 Indonesia        0.101</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="relational-databases.html#cb27-1" aria-hidden="true" tabindex="-1"></a>flu_tidy <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 5
##    year month   day country   flu_cases
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;         &lt;int&gt;
## 1  2002    12    29 Argentina        NA
## 2  2002    12    29 Australia        NA
## 3  2002    12    29 Austria          NA
## 4  2002    12    29 Belgium          NA
## 5  2002    12    29 Bolivia          NA</code></pre>
<p>We’re now gonna store each tables we created as .csv and .rds files.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="relational-databases.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#store dataset as .csv file</span></span>
<span id="cb29-2"><a href="relational-databases.html#cb29-2" aria-hidden="true" tabindex="-1"></a>dengue_tidy <span class="sc">%&gt;%</span> <span class="fu">write.csv</span>(<span class="st">&quot;data/denguetidy.csv&quot;</span>)</span>
<span id="cb29-3"><a href="relational-databases.html#cb29-3" aria-hidden="true" tabindex="-1"></a>flu_tidy <span class="sc">%&gt;%</span> <span class="fu">write.csv</span>(<span class="st">&quot;data/flutidy.csv&quot;</span>) </span>
<span id="cb29-4"><a href="relational-databases.html#cb29-4" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">write.csv</span>(<span class="st">&quot;data/gapminder.csv&quot;</span>) </span>
<span id="cb29-5"><a href="relational-databases.html#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="relational-databases.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">#store dataset as .rds file</span></span>
<span id="cb29-7"><a href="relational-databases.html#cb29-7" aria-hidden="true" tabindex="-1"></a>dengue_tidy <span class="sc">%&gt;%</span> <span class="fu">write_rds</span>(<span class="st">&quot;data/denguetidy.rds&quot;</span>) </span>
<span id="cb29-8"><a href="relational-databases.html#cb29-8" aria-hidden="true" tabindex="-1"></a>flu_tidy <span class="sc">%&gt;%</span> <span class="fu">write_rds</span>(<span class="st">&quot;data/flutidy.rds&quot;</span>) </span>
<span id="cb29-9"><a href="relational-databases.html#cb29-9" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">write_rds</span>(<span class="st">&quot;data/gapminder.rds&quot;</span>) </span></code></pre></div>
<p>For the next part of this analyse, we need a few packages to use Dbeaver and PostgreSQL. We downloaded the following packages.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="relational-databases.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;RPostgreSQL&#39;</span>)</span>
<span id="cb30-2"><a href="relational-databases.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&#39;devtools&#39;) # you should have this one already</span></span>
<span id="cb30-3"><a href="relational-databases.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;remotes&#39;</span>)</span>
<span id="cb30-4"><a href="relational-databases.html#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;RPostgres&#39;</span>)</span></code></pre></div>
<p>We have created a new databse called ‘workflowsdb’ in Dbeaver. To do this right click on postgres &gt; SQL Editor &gt; Open SQL console. In the console we created a new database with the following code: <code>CREATE DATABASE workflowsdb</code>.</p>
<p>To insert these three datasets, we need to connect to the workflows database we just created. Once we are connected, we’re gonna insert the tables into the database.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="relational-databases.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#load in DBI package</span></span>
<span id="cb31-2"><a href="relational-databases.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb31-3"><a href="relational-databases.html#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="relational-databases.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#connect to Dbeaver workflows database</span></span>
<span id="cb31-5"><a href="relational-databases.html#cb31-5" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RPostgres<span class="sc">::</span><span class="fu">Postgres</span>(), </span>
<span id="cb31-6"><a href="relational-databases.html#cb31-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">dbname =</span> <span class="st">&quot;workflowsdb&quot;</span>, </span>
<span id="cb31-7"><a href="relational-databases.html#cb31-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">host=</span><span class="st">&quot;localhost&quot;</span>, </span>
<span id="cb31-8"><a href="relational-databases.html#cb31-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">port=</span><span class="st">&quot;5432&quot;</span>, </span>
<span id="cb31-9"><a href="relational-databases.html#cb31-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">user=</span><span class="st">&quot;postgres&quot;</span>, </span>
<span id="cb31-10"><a href="relational-databases.html#cb31-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">password=</span><span class="st">&quot;password&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="relational-databases.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Make tables</span></span>
<span id="cb32-2"><a href="relational-databases.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue&quot;</span>, dengue_tidy)</span>
<span id="cb32-3"><a href="relational-databases.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu&quot;</span>, flu_tidy)</span>
<span id="cb32-4"><a href="relational-databases.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder&quot;</span>, gapminder_data)</span></code></pre></div>
<p>We need to know if everything is imported correctly. We need to inspect the contents of the tables with SQL and in R.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="relational-databases.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#load in DBI package</span></span>
<span id="cb33-2"><a href="relational-databases.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb33-3"><a href="relational-databases.html#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="relational-databases.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">#er moet nog een screen komen van de dataset in Dbeaver!!!!!!!!!</span></span>
<span id="cb33-5"><a href="relational-databases.html#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="relational-databases.html#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co">#inspect if datasets are corrrectly imported </span></span>
<span id="cb33-7"><a href="relational-databases.html#cb33-7" aria-hidden="true" tabindex="-1"></a>dengue_s <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">&quot;dengue&quot;</span>)</span>
<span id="cb33-8"><a href="relational-databases.html#cb33-8" aria-hidden="true" tabindex="-1"></a>flu_s <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">&quot;flu&quot;</span>)</span>
<span id="cb33-9"><a href="relational-databases.html#cb33-9" aria-hidden="true" tabindex="-1"></a>gapminder_s <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">&quot;gapminder&quot;</span>)</span>
<span id="cb33-10"><a href="relational-databases.html#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="relational-databases.html#cb33-11" aria-hidden="true" tabindex="-1"></a>dengue_s <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>##   year month day   country dengue_cases
## 1 2002    12  29 Argentina           NA
## 2 2002    12  29   Bolivia        0.101
## 3 2002    12  29    Brazil        0.073
## 4 2002    12  29     India        0.062
## 5 2002    12  29 Indonesia        0.101</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="relational-databases.html#cb35-1" aria-hidden="true" tabindex="-1"></a>flu_s <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>##   year month day   country flu_cases
## 1 2002    12  29 Argentina        NA
## 2 2002    12  29 Australia        NA
## 3 2002    12  29   Austria        NA
## 4 2002    12  29   Belgium        NA
## 5 2002    12  29   Bolivia        NA</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="relational-databases.html#cb37-1" aria-hidden="true" tabindex="-1"></a>gapminder_s <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>##               country year infant_mortality life_expectancy fertility
## 1             Albania 2002             21.0            75.5      2.20
## 2             Algeria 2002             32.4            73.8      2.41
## 3              Angola 2002            125.5            53.3      6.78
## 4 Antigua and Barbuda 2002             12.3            74.3      2.29
## 5           Argentina 2002             17.1            74.3      2.38
##   population          gdp continent          region
## 1    3123112   4059111575    Europe Southern Europe
## 2   31990387  58856686557    Africa Northern Africa
## 3   16109696  10780448534    Africa   Middle Africa
## 4      80030    840972692  Americas       Caribbean
## 5   37889443 242076212334  Americas   South America</code></pre>
<p>We now want to join these 3 databases. To join these three datasets together we need to clean the gapminder data so it could join the dengue and flue dataset. We saw that all 3 datasets have a colomn called ‘year’ and ‘country’. We already changed the colomn ‘year’ and ‘country’ in the flu en dengue dataset to match the gapminder dataset.</p>
<p>First we need to check their ranges in the colomn ‘year’. What’s their minimal year and what is their max year and how many years does each dataset contain?</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="relational-databases.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check the ranges of each dataset and put them in a list</span></span>
<span id="cb39-2"><a href="relational-databases.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(gapminder_data<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">unique</span>(),</span>
<span id="cb39-3"><a href="relational-databases.html#cb39-3" aria-hidden="true" tabindex="-1"></a>     dengue_tidy<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">unique</span>(),</span>
<span id="cb39-4"><a href="relational-databases.html#cb39-4" aria-hidden="true" tabindex="-1"></a>     flu_tidy<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">unique</span>())</span></code></pre></div>
<pre><code>## [[1]]
##  [1] 1960 1961 1962 1963 1964 1965 1966 1967 1968 1969 1970 1971 1972 1973 1974
## [16] 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984 1985 1986 1987 1988 1989
## [31] 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 2004
## [46] 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016
## 
## [[2]]
##  [1] 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015
## 
## [[3]]
##  [1] 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015</code></pre>
<p>As we can see, the gapminder has a wider range than the flu and dengue datasets. We’ll remove the years that aren’t in the flu and dengue dataset so we could join these three datasets together.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="relational-databases.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remove the years that the flu and dengue dataset not contain</span></span>
<span id="cb41-2"><a href="relational-databases.html#cb41-2" aria-hidden="true" tabindex="-1"></a>gapminder_data <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="relational-databases.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2002</span><span class="sc">:</span><span class="dv">2015</span>)</span>
<span id="cb41-4"><a href="relational-databases.html#cb41-4" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb41-5"><a href="relational-databases.html#cb41-5" aria-hidden="true" tabindex="-1"></a>gapminder_data<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code></pre></div>
<pre><code>##  [1] 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015</code></pre>
<p>The gapminder dataset has now the same range as the flu and dengue dataset.</p>
<p>we’ll remove the old gapminder dataset for the new clean dataset named “gapminder_data” in Dbeaver with SQL.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="relational-databases.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">#replace the old gapminder dataset with the new gapminder dataset</span></span>
<span id="cb43-2"><a href="relational-databases.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbRemoveTable</span>(con, <span class="st">&quot;gapminder&quot;</span>)</span>
<span id="cb43-3"><a href="relational-databases.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder&quot;</span>, gapminder_data)</span>
<span id="cb43-4"><a href="relational-databases.html#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="relational-databases.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co">#laat zien dat het ook is gebeurd!!!!</span></span></code></pre></div>
<p>We can now join all three datasets together in DBeaver with SQL. we’re using <code>inner_join</code> to make a dataset with variables that are available in both datasets. we’re using <code>inner_join</code> to make a dataset with variables that are available in both datasets.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="relational-databases.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">#inner join the flu and dengue dataset</span></span>
<span id="cb44-2"><a href="relational-databases.html#cb44-2" aria-hidden="true" tabindex="-1"></a>flu_dengue <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(</span>
<span id="cb44-3"><a href="relational-databases.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  flu_tidy, dengue_tidy, </span>
<span id="cb44-4"><a href="relational-databases.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)</span>
<span id="cb44-5"><a href="relational-databases.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-6"><a href="relational-databases.html#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="relational-databases.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co">#inner join the gapminder dataset with flu_dengue</span></span>
<span id="cb44-8"><a href="relational-databases.html#cb44-8" aria-hidden="true" tabindex="-1"></a>gapminder_dengue_flu <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(</span>
<span id="cb44-9"><a href="relational-databases.html#cb44-9" aria-hidden="true" tabindex="-1"></a>  gapminder_data, flu_dengue, </span>
<span id="cb44-10"><a href="relational-databases.html#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)</span>
<span id="cb44-11"><a href="relational-databases.html#cb44-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="relational-databases.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#left join gapminder with flu</span></span>
<span id="cb45-2"><a href="relational-databases.html#cb45-2" aria-hidden="true" tabindex="-1"></a>gapminder_flu <span class="ot">&lt;-</span> <span class="fu">left_join</span>(</span>
<span id="cb45-3"><a href="relational-databases.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  gapminder_data, flu_tidy, </span>
<span id="cb45-4"><a href="relational-databases.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)</span>
<span id="cb45-5"><a href="relational-databases.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-6"><a href="relational-databases.html#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="relational-databases.html#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co">#left join gapminder with dengue</span></span>
<span id="cb45-8"><a href="relational-databases.html#cb45-8" aria-hidden="true" tabindex="-1"></a>gapminder_flu <span class="ot">&lt;-</span> <span class="fu">left_join</span>(</span>
<span id="cb45-9"><a href="relational-databases.html#cb45-9" aria-hidden="true" tabindex="-1"></a>  gapminder_data, dengue_tidy, </span>
<span id="cb45-10"><a href="relational-databases.html#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)</span>
<span id="cb45-11"><a href="relational-databases.html#cb45-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="relational-databases.html#cb46-1" aria-hidden="true" tabindex="-1"></a>gapminder_dengue_flu <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb46-2"><a href="relational-databases.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb46-3"><a href="relational-databases.html#cb46-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> flu_cases,</span>
<span id="cb46-4"><a href="relational-databases.html#cb46-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> country)</span>
<span id="cb46-5"><a href="relational-databases.html#cb46-5" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb46-6"><a href="relational-databases.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">25</span>),</span>
<span id="cb46-7"><a href="relational-databases.html#cb46-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb46-8"><a href="relational-databases.html#cb46-8" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> </span>
<span id="cb46-9"><a href="relational-databases.html#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Flu cases per country&quot;</span>, </span>
<span id="cb46-10"><a href="relational-databases.html#cb46-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;flu cases per country around the world in total&quot;</span>,</span>
<span id="cb46-11"><a href="relational-databases.html#cb46-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;country&quot;</span>,</span>
<span id="cb46-12"><a href="relational-databases.html#cb46-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;flu cases&quot;</span></span>
<span id="cb46-13"><a href="relational-databases.html#cb46-13" aria-hidden="true" tabindex="-1"></a>       )</span></code></pre></div>
<p><img src="_main_files/figure-html/flu%20cases-1.png" width="672" /></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="relational-databases.html#cb47-1" aria-hidden="true" tabindex="-1"></a>gapminder_dengue_flu <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb47-2"><a href="relational-databases.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb47-3"><a href="relational-databases.html#cb47-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> dengue_cases,</span>
<span id="cb47-4"><a href="relational-databases.html#cb47-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> country)</span>
<span id="cb47-5"><a href="relational-databases.html#cb47-5" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb47-6"><a href="relational-databases.html#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">25</span>),</span>
<span id="cb47-7"><a href="relational-databases.html#cb47-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb47-8"><a href="relational-databases.html#cb47-8" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> </span>
<span id="cb47-9"><a href="relational-databases.html#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Dengue cases per country&quot;</span>, </span>
<span id="cb47-10"><a href="relational-databases.html#cb47-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;dengue cases per country around the world in total&quot;</span>,</span>
<span id="cb47-11"><a href="relational-databases.html#cb47-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;country&quot;</span>,</span>
<span id="cb47-12"><a href="relational-databases.html#cb47-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;dengue cases&quot;</span></span>
<span id="cb47-13"><a href="relational-databases.html#cb47-13" aria-hidden="true" tabindex="-1"></a>       )</span></code></pre></div>
<p><img src="_main_files/figure-html/dengue%20cases-1.png" width="672" /></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="relational-databases.html#cb48-1" aria-hidden="true" tabindex="-1"></a>flu_dengue_2003 <span class="ot">&lt;-</span> flu_dengue <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="dv">2003</span>)</span>
<span id="cb48-2"><a href="relational-databases.html#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="relational-databases.html#cb48-3" aria-hidden="true" tabindex="-1"></a>correlation<span class="ot">&lt;-</span><span class="fu">cor.test</span>(flu_dengue_2003<span class="sc">$</span>flu_cases, flu_dengue_2003<span class="sc">$</span>dengue_cases, <span class="at">method=</span><span class="fu">c</span>(<span class="st">&quot;pearson&quot;</span>))<span class="sc">$</span>estimate <span class="sc">%&gt;%</span></span>
<span id="cb48-4"><a href="relational-databases.html#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb48-5"><a href="relational-databases.html#cb48-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-6"><a href="relational-databases.html#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="relational-databases.html#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> flu_dengue_2003, <span class="fu">aes</span>(<span class="at">x =</span> flu_cases, <span class="at">y =</span> dengue_cases)) <span class="sc">+</span></span>
<span id="cb48-8"><a href="relational-databases.html#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> country, </span>
<span id="cb48-9"><a href="relational-databases.html#cb48-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">shape =</span> country),</span>
<span id="cb48-10"><a href="relational-databases.html#cb48-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">0.8</span>,<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">width =</span> <span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb48-11"><a href="relational-databases.html#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Relation between flu cases and dengue cases&quot;</span>,</span>
<span id="cb48-12"><a href="relational-databases.html#cb48-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;dengue cases&quot;</span>,</span>
<span id="cb48-13"><a href="relational-databases.html#cb48-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;flu cases&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-14"><a href="relational-databases.html#cb48-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/scatterplot%20flu%20dengue-1.png" width="672" /></p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="western-blot-analysis-using-rstudio.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/006-databases.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
